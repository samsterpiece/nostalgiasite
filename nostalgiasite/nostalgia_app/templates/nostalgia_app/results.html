{% extends 'nostalgia_app/base.html' %}

{% block title %}Knowledge Time Capsule: From {{ grad_year }} to 2024{% endblock %}

{% block content %}
<h2>Knowledge Time Capsule: From {{ grad_year }} to 2024</h2>

<div class="category-selection">
    <h3>Select a Category to Explore:</h3>
    <div class="category-buttons">
        {% for category in categories %}
            <a href="?category={{ category.name }}" class="category-button {% if category.name == selected_category %}active{% endif %}">{{ category.name }}</a>
        {% endfor %}
    </div>
</div>

<div id="facts-container">
    {% if facts %}
        {% for fact in facts %}
            <div class="fact-item">
                <h4>{{ fact.year }} - {{ fact.title }}</h4>
                <p>{{ fact.description }}</p>
                <p>Categories: {{ fact.categories|join:", " }}</p>
                <a href="{{ fact.source_url }}" target="_blank">Learn More</a>
            </div>
        {% endfor %}
    {% else %}
        <p>No facts found for the selected category and time period.</p>
    {% endif %}
</div>

<div class="significant-events">
    <h3>Significant Events Since {{ grad_year }}</h3>
    <!-- Implement significant events section here -->
</div>

<div class="recommendations">
    <h3>Recommended Reading to Catch Up</h3>
    <!-- Implement recommendations section here -->
</div>
{% endblock %}

{% block extra_css %}
<style>
    .category-buttons {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 10px;
        margin-bottom: 20px;
    }
    .category-button {
        padding: 10px 15px;
        background-color: #000080;
        color: #FFFF00;
        text-decoration: none;
        border: 2px solid #FFFF00;
    }
    .category-button.active {
        background-color: #FFFF00;
        color: #000080;
    }
    .fact-item {
        background-color: #000080;
        border: 2px solid #00FF00;
        padding: 15px;
        margin-bottom: 15px;
    }
</style>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const categoryButtons = document.querySelectorAll('.category-button');
        categoryButtons.forEach(button => {
            button.addEventListener('click', function(e) {
                e.preventDefault();
                const category = this.getAttribute('href').split('=')[1];
                window.location.href = `?category=${category}`;
            });
        });
    });
</script>
{% endblock %}